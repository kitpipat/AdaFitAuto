<script type="text/javascript">
    var tTBIStaDocDoc=$("#ohdTBIStaDoc").val(),tTBIStaApvDoc=$("#ohdTBIStaApv").val(),tTBIStaPrcStkDoc=$("#ohdTBIStaPrcStk").val();function JSxTBISaveEditInline(t){console.log("JSxTBISaveEditInline: ",t);var e=t.Element;if(""==$(e).parents("tr.xWPdtItem").find("td label.xWPIDisChgDT").text().trim()){console.log("No Have Dis/Chage DT");var a=t.DataAttribute[1]["data-seq"],o=t.DataAttribute[0]["data-field"],l=accounting.unformat(t.VeluesInline);FSvTBIEditPdtIntoTableDT(a,o,l,!1)}else console.log("Have Dis/Chage DT"),$("#odvTBIModalConfirmDeleteDTDis").modal({backdrop:"static",show:!0}),$("#odvTBIModalConfirmDeleteDTDis #obtTBIConfirmDeleteDTDis").unbind(),$("#odvTBIModalConfirmDeleteDTDis #obtTBIConfirmDeleteDTDis").one("click",function(){$("#odvTBIModalConfirmDeleteDTDis").modal("hide"),$(".modal-backdrop").remove();var e=t.DataAttribute[1]["data-seq"],a=t.DataAttribute[0]["data-field"],o=accounting.unformat(t.VeluesInline);FSvTBIEditPdtIntoTableDT(e,a,o,!0)}),$("#odvTBIModalConfirmDeleteDTDis #obtTBICancelDeleteDTDis").unbind(),$("#odvTBIModalConfirmDeleteDTDis #obtTBICancelDeleteDTDis").one("click",function(){$(".modal-backdrop").remove(),JSvTBILoadPdtDataTableHtml()}),$("#odvTBIModalConfirmDeleteDTDis").modal("show")}function JCNvTBICallModalDisChagDT(t){var e=JCNxFuncChkSessionExpired();if(void 0!==e&&1==e){var a=$(t).parents(".xWPdtItem").data("docno"),o=$(t).parents(".xWPdtItem").data("pdtcode"),l=$(t).parents(".xWPdtItem").data("pdtname"),d=$(t).parents(".xWPdtItem").data("puncode"),i=$(t).parents(".xWPdtItem").data("netafhd"),n=$(t).parents(".xWPdtItem").data("setprice"),D=$(t).parents(".xWPdtItem").data("qty"),T=$(t).parents(".xWPdtItem").data("stadis"),I=$(t).parents(".xWPdtItem").data("seqno"),s=""!=$(t).parents(".xWPIDisChgDTForm").find("label.xWPIDisChgDT").text();window.DisChgDataRowDT={tDocNo:a,tPdtCode:o,tPdtName:l,tPunCode:d,tNet:i,tSetPrice:n,tQty:D,tStadis:T,tSeqNo:I,bHaveDisChgDT:s};JSxTBIOpenDisChgPanel({DisChgType:"disChgDT"})}else JCNxShowMsgSessionExpired()}function JSxTBITextInModalDelPdtDtTemp(){var t=[JSON.parse(localStorage.getItem("TBI_LocalItemDataDelDtTemp"))];if(null==t[0]||""==t[0]);else{var e="",a="",o="",l="";$.each(t[0],function(t,d){e+=d.tDocNo,e+=" , ",a+=d.tSeqNo,a+=" , ",o+=d.tPdtCode,o+=" , ",l+=d.tPunCode,l+=" , "}),$("#odvTBIModalDelPdtInDTTempMultiple #ospTextConfirmDelMultiple").text($("#oetTextComfirmDeleteMulti").val()),$("#odvTBIModalDelPdtInDTTempMultiple #ohdConfirmTBIDocNoDelete").val(e),$("#odvTBIModalDelPdtInDTTempMultiple #ohdConfirmTBISeqNoDelete").val(a),$("#odvTBIModalDelPdtInDTTempMultiple #ohdConfirmTBIPdtCodeDelete").val(o),$("#odvTBIModalDelPdtInDTTempMultiple #ohdConfirmTBIPunCodeDelete").val(l)}}function JSxTBIShowButtonDelMutiDtTemp(){var t=[JSON.parse(localStorage.getItem("TBI_LocalItemDataDelDtTemp"))];null==t[0]||""==t[0]?$("#odvTBIMngDelPdtInTableDT #oliTBIBtnDeleteMulti").addClass("disabled"):t[0].length>1?$("#odvTBIMngDelPdtInTableDT #oliTBIBtnDeleteMulti").removeClass("disabled"):$("#odvTBIMngDelPdtInTableDT #oliTBIBtnDeleteMulti").addClass("disabled")}function JSnTBIDelPdtInDTTempSingle(t){var e=JCNxFuncChkSessionExpired();if(void 0!==e&&1==e){var a=$(t).parents("tr.xWPdtItem").attr("data-pdtcode"),o=$(t).parents("tr.xWPdtItem").attr("data-seqno");$(t).parents("tr.xWPdtItem").remove(),JSnTBIRemovePdtDTTempSingle(o,a)}else JCNxShowMsgSessionExpired()}function JSoTBIRemoveCommaData(t){var e=t.substring(0,t.length-2).split(" , "),a=e.length,o=[];for($i=0;$i<a;$i++)o.push(e[$i]);return o}$(document).ready(function(){if(3==tTBIStaDocDoc||1==tTBIStaApvDoc&&1==tTBIStaPrcStkDoc)$("#otbTBIDocPdtAdvTableList .xCNPIBeHideMQSS").hide();else{JCNxSetNewEditInline({DocModules:"",FunctionName:"JSxTBISaveEditInline",DataAttribute:["data-field","data-seq"],TableID:"otbTBIDocPdtAdvTableList",NotFoundDataRowClass:"xWPITextNotfoundDataPdtTable",EditInLineButtonDeleteClass:"xWPIDeleteBtnEditButtonPdt",LabelShowDataClass:"xWShowInLine",DivHiddenDataEditClass:"xWEditInLine"}),$(".xWEditInlineElement").removeAttr("disabled");let t=$(".xWEditInlineElement");for(let e=0;e<t.length;e++)$(t.eq(e)).val($(t.eq(e)).val().trim())}$("#otbTBIDocPdtAdvTableList #odvTBodyTBIPdtAdvTableList .ocbListItem").unbind().click(function(){let t=$("#oetTBIDocNo").val(),e=$(this).parents(".xWPdtItem").data("seqno"),a=$(this).parents(".xWPdtItem").data("pdtcode"),o=$(this).parents(".xWPdtItem").data("puncode");$(this).prop("checked",!0);let l=localStorage.getItem("TBI_LocalItemDataDelDtTemp"),d=[];l&&(d=JSON.parse(l));let i=[JSON.parse(localStorage.getItem("TBI_LocalItemDataDelDtTemp"))];if(""==i||null==i)d.push({tDocNo:t,tSeqNo:e,tPdtCode:a,tPunCode:o}),localStorage.setItem("TBI_LocalItemDataDelDtTemp",JSON.stringify(d)),JSxTBITextInModalDelPdtDtTemp();else{var n=JStTBIFindObjectByKey(i[0],"tSeqNo",e);if("None"==n)d.push({tDocNo:t,tSeqNo:e,tPdtCode:a,tPunCode:o}),localStorage.setItem("TBI_LocalItemDataDelDtTemp",JSON.stringify(d)),JSxTBITextInModalDelPdtDtTemp();else if("Dupilcate"==n){localStorage.removeItem("TBI_LocalItemDataDelDtTemp"),$(this).prop("checked",!1);var D=i[0].length;for($i=0;$i<D;$i++)i[0][$i].tSeqNo==e&&delete i[0][$i];var T=[];for($i=0;$i<D;$i++)null!=i[0][$i]&&T.push(i[0][$i]);localStorage.setItem("TBI_LocalItemDataDelDtTemp",JSON.stringify(T)),JSxTBITextInModalDelPdtDtTemp()}}JSxTBIShowButtonDelMutiDtTemp()}),$("#odvTBIModalDelPdtInDTTempMultiple #osmConfirmDelMultiple").unbind().click(function(){var t=JCNxFuncChkSessionExpired();void 0!==t&&1==t?JSnTBIRemovePdtDTTempMultiple():JCNxShowMsgSessionExpired()})});
</script>